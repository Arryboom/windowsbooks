<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
	<html>
		<head>
			<title>page_408</title>
			<link rel="stylesheet" href="reset.css" type="text/css" media="all">
			<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		</head>
		<body>
		<table summary="top nav" border="0" width="100%">
			<tr>
				<td align="left" width="30%" style="background: #EEF3E2"><a style="color: blue; font-size: 120%; font-weight: bold; text-decoration: none; font-family: verdana;" href="page_407.html">&lt;&nbsp;previous page</a></td>
				<td id="ebook_previous" align="center" width="40%" style="background: #EEF3E2"><strong style="color: #2F4F4F; font-size: 120%;">page_408</strong></td>
				<td align="right" width="30%" style="background: #EEF3E2"><a style="color: blue; font-size: 120%; font-weight: bold; text-decoration: none; font-family: verdana;" href="page_409.html">next page&nbsp;&gt;</a></td>
			</tr>
		
			<tr>
				<td id="ebook_page" align="left" colspan="3" style="background: #ffffff; padding: 20px;">
    

<table border="0" width="100%" cellpadding="0"><tr><td align="center">
  <table border="0" cellpadding="2" cellspacing="0" width="100%"><tr><td align="left"></td>
  <td align="right"></td>
  </tr></table></td>
</tr><tr><td align="left">



<p>
</p><table border="0" cellspacing="0" cellpadding="0" width="100%"><tr><td align="right"><font face="Times New Roman, Times, Serif" size="2" color="#FF0000">Page 408</font></td></tr></table><table border="0" cellspacing="0" cellpadding="0"><tr><td rowspan="5"></td>
  <td colspan="3" height="12"></td>
  <td rowspan="5"></td>
</tr><tr><td colspan="3"></td>
</tr><tr><td></td>
  <td><font face="Times New Roman, Times, Serif" size="3">descriptor Hardware ID, it uses the </font><font face="Courier New, Courier, Mono New, Courier, Mono" size="3">Interface</font><font face="Times New Roman, Times, Serif" size="3"> descriptor class constants to form a Compatible ID.</font></td>
<td></td>
</tr><tr><td colspan="3"></td>
</tr><tr><td colspan="3" height="1"></td>
</tr></table><table border="0" cellspacing="0" cellpadding="0"><tr><td rowspan="5"></td>
  <td colspan="3" height="12"></td>
  <td rowspan="5"></td>
</tr><tr><td colspan="3"></td>
</tr><tr><td></td>
  <td><font face="Times New Roman, Times, Serif" size="3">The USB class specifications define what interfaces and endpoints must appear in a particular class of device. A class may define one or more additional class-specific descriptors for the class device, interface, or endpoint. These devices still provide the standard device, configuration, interface, and endpoint descriptors.</font></td>
<td></td>
</tr><tr><td colspan="3"></td>
</tr><tr><td colspan="3" height="1"></td>
</tr></table><table border="0" cellspacing="0" cellpadding="0"><tr><td rowspan="5"></td>
  <td colspan="3" height="12"></td>
  <td rowspan="5"></td>
</tr><tr><td colspan="3"></td>
</tr><tr><td></td>
  <td><font face="Times New Roman, Times, Serif" size="3">Device classes typically also define a series of class specific request codes for control transactions. Bits 6 and 5 of the request code are set to </font><font face="Courier New, Courier, Mono New, Courier, Mono" size="3">01</font><font face="Times New Roman, Times, Serif" size="3"> to indicate that these are class-specific requests. For example, the </font><font face="Courier New, Courier, Mono New, Courier, Mono" size="3">Hub</font><font face="Times New Roman, Times, Serif" size="3"> class request </font><font face="Courier New, Courier, Mono New, Courier, Mono" size="3">ClearHubFeature</font><font face="Times New Roman, Times, Serif" size="3"> has code </font><font face="Courier New, Courier, Mono New, Courier, Mono" size="3">0×20</font><font face="Times New Roman, Times, Serif" size="3">.</font></td>
<td></td>
</tr><tr><td colspan="3"></td>
</tr><tr><td colspan="3" height="1"></td>
</tr></table><table border="0" cellspacing="0" cellpadding="0"><tr><td rowspan="5"></td>
  <td colspan="3" height="12"></td>
  <td rowspan="5"></td>
</tr><tr><td colspan="3"></td>
</tr><tr><td></td>
  <td><font face="Times New Roman, Times, Serif" size="3">Obtain the appropriate class specification from the USB website at </font><font face="Times New Roman, Times, Serif" size="3" color="#0000FF"><u>www.usb.org/developers/</u></font><font face="Times New Roman, Times, Serif" size="3">. The HID class and its USB implementation are discussed in detail in Chapter 22. The power supply device class is defined purely as a HID device.</font></td>
<td></td>
</tr><tr><td colspan="3"></td>
</tr><tr><td colspan="3" height="1"></td>
</tr></table><table border="0" cellspacing="0" cellpadding="0"><tr><td rowspan="5"></td>
  <td colspan="3" height="12"></td>
  <td rowspan="5"></td>
</tr><tr><td colspan="3"></td>
</tr><tr><td></td>
  <td><font face="Times New Roman, Times, Serif" size="3">The class-specific descriptors are usually types of </font><font face="Courier New, Courier, Mono New, Courier, Mono" size="3">Interface</font><font face="Times New Roman, Times, Serif" size="3"> descriptors. Class-specific descriptor IDs have the top three bits set to </font><font face="Courier New, Courier, Mono New, Courier, Mono" size="3">001</font><font face="Times New Roman, Times, Serif" size="3">. Table 20.7 shows the first assigned class-specific descriptor IDs.</font></td>
<td></td>
</tr><tr><td colspan="3"></td>
</tr><tr><td colspan="3" height="1"></td>
</tr></table><table border="0" cellspacing="0" cellpadding="0" width="100%"><tr><td rowspan="5"></td>
  <td colspan="3" height="12"></td>
  <td rowspan="5"></td>
</tr><tr><td colspan="3"></td>
</tr><tr><td></td>
  <td align="center"><font face="Times New Roman, Times, Serif" size="3"><img src="4a30db2f1e805b05ebe8470b599d7693.gif" border="0" alt="0408-01.gif" width="517" height="142" /></font></td>
<td></td>
</tr><tr><td colspan="3"></td>
</tr><tr><td colspan="3" height="1"></td>
</tr></table><table border="0" cellspacing="0" cellpadding="0"><tr><td rowspan="5"></td>
  <td colspan="3" height="12"></td>
  <td rowspan="5"></td>
</tr><tr><td colspan="3"></td>
</tr><tr><td></td>
  <td><font face="Times New Roman, Times, Serif" size="3">Printer Class</font></td>
<td></td>
</tr><tr><td colspan="3"></td>
</tr><tr><td colspan="3" height="1"></td>
</tr></table><table border="0" cellspacing="0" cellpadding="0"><tr><td rowspan="5"></td>
  <td colspan="3" height="12"></td>
  <td rowspan="5"></td>
</tr><tr><td colspan="3"></td>
</tr><tr><td></td>
  <td><font face="Times New Roman, Times, Serif" size="3">As an example of a USB class, it is worth looking here at the printer class. USB printers should resemble EPP or ECP parallel port printers, as defined in the IEEE 1284 specification. The format of the print data sent to the printer is not defined by this spec.</font></td>
<td></td>
</tr><tr><td colspan="3"></td>
</tr><tr><td colspan="3" height="1"></td>
</tr></table><table border="0" cellspacing="0" cellpadding="0"><tr><td rowspan="5"></td>
  <td colspan="3" height="12"></td>
  <td rowspan="5"></td>
</tr><tr><td colspan="3"></td>
</tr><tr><td></td>
  <td><font face="Times New Roman, Times, Serif" size="3">The printer class does not define any class-specific descriptors. The standard device descriptor has zeroes for its class, subclass, and protocol. The standard interface descriptor has constant </font><font face="Courier New, Courier, Mono New, Courier, Mono" size="3">USB_DEVICE_CLASS_PRINTER</font><font face="Times New Roman, Times, Serif" size="3"> (</font><font face="Courier New, Courier, Mono New, Courier, Mono" size="3">0×07</font><font face="Times New Roman, Times, Serif" size="3">) in its </font><font face="Courier New, Courier, Mono New, Courier, Mono" size="3"><i>bInterfaceClass</i></font><font face="Times New Roman, Times, Serif" size="3"> field. </font><font face="Courier New, Courier, Mono New, Courier, Mono" size="3"><i>bInterfaceSubClass</i></font><font face="Times New Roman, Times, Serif" size="3"> is always set to </font><font face="Courier New, Courier, Mono New, Courier, Mono" size="3">0×01</font><font face="Times New Roman, Times, Serif" size="3"> indicating a Printer. The </font><font face="Courier New, Courier, Mono New, Courier, Mono" size="3"><i>bInterfaceProtocol</i></font><font face="Times New Roman, Times, Serif" size="3"> field has </font><font face="Courier New, Courier, Mono New, Courier, Mono" size="3">1</font><font face="Times New Roman, Times, Serif" size="3"> if the printer is unidirectional (i.e., it only accept incoming data) or </font><font face="Courier New, Courier, Mono New, Courier, Mono" size="3">2</font><font face="Times New Roman, Times, Serif" size="3"> if bidirectional (i.e., it can return status information). A printer can have only one such interface, but it could perhaps switch between the two operating modes using an alternate interface setting.</font></td>
<td></td>
</tr><tr><td colspan="3"></td>
</tr><tr><td colspan="3" height="1"></td>
</tr></table><table border="0" cellspacing="0" cellpadding="0"><tr><td rowspan="5"></td>
  <td colspan="3" height="12"></td>
  <td rowspan="5"></td>
</tr><tr><td colspan="3"></td>
</tr><tr><td></td>
  <td><font face="Times New Roman, Times, Serif" size="3">A printer class device always has a Bulk </font><font face="Courier New, Courier, Mono New, Courier, Mono" size="3">OUT</font><font face="Times New Roman, Times, Serif" size="3"> pipe for data sent to the printer. A bidirectional printer also has a Bulk </font><font face="Courier New, Courier, Mono New, Courier, Mono" size="3">IN</font><font face="Times New Roman, Times, Serif" size="3"> pipe. These pipes are used to carry the relevant page control /description information and status.</font></td>
<td></td>
</tr><tr><td colspan="3"></td>
</tr><tr><td colspan="3" height="1"></td>
</tr></table><table border="0" cellspacing="0" cellpadding="0"><tr><td rowspan="5"></td>
  <td colspan="3" height="12"></td>
  <td rowspan="5"></td>
</tr><tr><td colspan="3"></td>
</tr><tr><td></td>
  <td><font face="Times New Roman, Times, Serif" size="3">A printer uses the default control pipe Endpoint 0 for standard USB purposes. However, it is also used for three printer class-specific requests. </font><font face="Courier New, Courier, Mono New, Courier, Mono" size="3">GET_DEVICE_ID</font><font face="Times New Roman, Times, Serif" size="3"> (request </font><font face="Courier New, Courier, Mono New, Courier, Mono" size="3">0</font><font face="Times New Roman, Times, Serif" size="3">) reads an IEEE 1284 device ID. </font><font face="Courier New, Courier, Mono New, Courier, Mono" size="3">GET_PORT_STATUS</font><font face="Times New Roman, Times, Serif" size="3"> (</font><font face="Courier New, Courier, Mono New, Courier, Mono" size="3">1</font><font face="Times New Roman, Times, Serif" size="3">) gets a status byte that mimics the Centronics printer port status. </font><font face="Courier New, Courier, Mono New, Courier, Mono" size="3">SOFT_RESET</font><font face="Times New Roman, Times, Serif" size="3"> (</font><font face="Courier New, Courier, Mono New, Courier, Mono" size="3">2</font><font face="Times New Roman, Times, Serif" size="3">) flushes all the buffers, resets the Bulk pipes, and clears all stall conditions.</font><font face="Times New Roman, Times, Serif" size="3" color="#FFFF00"></font></td>
<td></td>
</tr><tr><td colspan="3"></td>
</tr><tr><td colspan="3" height="1"></td>
</tr></table>







</td>
</tr></table><p><font size="0">
</font></p>
 




  </td>
			</tr>
	
			<tr>
				<td align="left" width="30%" style="background: #EEF3E2"><a style="color: blue; font-size: 120%; font-weight: bold; text-decoration: none; font-family: verdana;" href="page_407.html">&lt;&nbsp;previous page</a></td>
				<td id="ebook_next" align="center" width="40%" style="background: #EEF3E2"><strong style="color: #2F4F4F; font-size: 120%;">page_408</strong></td>
				<td align="right" width="30%" style="background: #EEF3E2"><a style="color: blue; font-size: 120%; font-weight: bold; text-decoration: none; font-family: verdana;" href="page_409.html">next page&nbsp;&gt;</a></td>
			</tr>
		</table>
		</body>
	</html>